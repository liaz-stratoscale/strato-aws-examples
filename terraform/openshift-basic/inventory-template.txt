[OSEv3:children]
masters
etcd
nodes

[OSEv3:vars]
ansible_ssh_user=centos
ansible_become=true
openshift_deployment_type=origin

openshift_release=v3.9

openshift_check_min_host_memory_gb=8
openshift_disable_check=docker_image_availability,docker_storage,disk_availability

containerized=true
openshift_install_examples=true
openshift_metrics_install_metrics=false
openshift_metrics_start_cluster=false

# use htpasswd authentication with demo/rackattack
openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]
openshift_master_htpasswd_users={'demo': '$apr1$27.X/US0$XQiIpc7wtFxvTESRlCSdE.'}


##
## Dedocated endopoint for the infra
# put the router on dedicated infra node
openshift_hosted_router_selector='region=infra'
openshift_master_default_subdomain=${public_subdomain}

# put the image registry on dedicated infra node
openshift_hosted_registry_selector='region=infra'


# project pods should be placed on primary nodes
osm_default_node_selector='region=primary'

[masters]
${master_hostname}

[etcd]
${master_hostname}

[nodes]
## Primary endpoint on master
${master_hostname} openshift_hostname=${master_hostname} openshift_public_hostname=${admin_hostname}
${infra_hostname} openshift_hostname=${infra_hostname} openshift_node_labels="{'region': 'infra', 'zone': 'default'}"
${worker_hostname} openshift_hostname=${worker_hostname} openshift_schedulable=true openshift_node_labels="{'region': 'primary', 'zone': 'default'}"
